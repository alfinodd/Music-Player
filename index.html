<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelompok 5 - Ultimate Music Experience</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        :root {
            --primary: #6366f1;
            --primary-dark: #4338ca;
            --secondary: #8b5cf6;
            --accent: #06ffa5;
            --bg-dark: #0f0f23;
            --bg-darker: #050507;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --shadow-glow: 0 0 50px rgba(99, 102, 241, 0.3);
            --shadow-intense: 0 20px 60px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--bg-darker) 0%, var(--bg-dark) 50%, #1a1a2e 100%);
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            transition: all 0.5s ease-in-out;
        }

        body.player-active-bg {
            background: linear-gradient(135deg, #1a002c 0%, var(--bg-dark) 100%);
        }

        body.detail-active-bg {
            background: linear-gradient(135deg, #331A40 0%, var(--bg-dark) 100%);
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: radial-gradient(circle at 20% 50%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 40% 80%, rgba(6, 255, 165, 0.1) 0%, transparent 50%);
            animation: backgroundShift 20s ease-in-out infinite;
        }

        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .particle {
            position: absolute;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border-radius: 50%;
            animation: float 15s infinite;
            opacity: 0.1;
        }

        @keyframes backgroundShift {
            0%, 100% { transform: rotate(0deg) scale(1); }
            33% { transform: rotate(120deg) scale(1.1); }
            66% { transform: rotate(240deg) scale(0.9); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-100px) rotate(90deg); opacity: 0.3; }
            50% { transform: translateY(-50px) rotate(180deg); opacity: 0.2; }
            75% { transform: translateY(-150px) rotate(270deg); opacity: 0.1; }
        }

        /* Video Background */
        .video-background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            opacity: 0;
            transition: opacity 0.7s ease-in-out;
        }

        .video-background-container.active {
            opacity: 1;
        }

        .video-background-container video {
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            object-fit: cover;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1;
        }

        /* Page Management */
        .page {
            display: none;
            padding: 1rem;
            min-height: 100vh;
            position: relative;
            z-index: 2;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            box-sizing: border-box;
        }

        .page.active {
            display: flex;
            animation: pageEnter 0.6s ease-out;
        }

        @keyframes pageEnter {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Header Styling */
        header {
            text-align: center;
            margin-bottom: 3rem;
            width: 100%;
        }

        header h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { filter: drop-shadow(0 0 20px rgba(99, 102, 241, 0.5)); }
            to { filter: drop-shadow(0 0 40px rgba(139, 92, 246, 0.8)); }
        }

        /* Song List Styling */
        .song-list {
            list-style: none;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            padding: 0 2rem;
        }

        .song-list li {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
        }

        .song-list li::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: all 0.6s;
        }

        .song-list li:hover::before {
            left: 100%;
        }

        .song-list li:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-glow), var(--shadow-intense);
            border-color: var(--primary);
        }

        .song-art-list {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            margin-right: 1rem;
        }

        .song-info-list h3 {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            font-size: 1.1rem;
            margin: 0 0 0.25rem 0;
        }

        .song-info-list p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin: 0;
        }

        .loading-songs {
            grid-column: 1 / -1;
            text-align: center;
            color: var(--text-secondary);
            font-size: 1.2rem;
            padding: 3rem;
            background: transparent !important;
            box-shadow: none !important;
            cursor: default !important;
            border: none !important;
        }

        .loading-songs:hover {
            background: transparent !important;
            transform: none !important;
        }

        /* Back Button */
        .back-btn {
            position: absolute;
            top: 1.5rem;
            left: 1.5rem;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            color: var(--text-primary);
            padding: 12px 24px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-btn:hover {
            background: var(--primary);
            transform: translateX(-5px);
            box-shadow: var(--shadow-glow);
        }

        .back-btn i {
            margin-right: 0.5rem;
        }

        /* Song Detail Page */
        .song-detail-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            padding: 3rem;
            box-shadow: var(--shadow-intense);
            width: 100%;
            max-width: 400px;
            margin-top: 5rem;
        }

        .detail-album-art {
            width: 180px;
            height: 180px;
            border-radius: 24px;
            margin-bottom: 2rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            animation: albumFloat 6s ease-in-out infinite;
            object-fit: cover;
        }

        @keyframes albumFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
        }

        .detail-album-art:hover {
            animation-play-state: paused;
            transform: scale(1.05) rotate(5deg);
        }

        .song-detail-container h2 {
    font-size: 1.8rem;
    font-weight: 700;
    margin: 0 0 0.5rem 0;
    background: linear-gradient(135deg, var(--text-primary), var(--accent));
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    -webkit-text-fill-color: transparent;
        }
        .song-detail-container p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin: 0.2rem 0;
        }

        .play-from-detail-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 50px;
            color: white;
            padding: 16px 32px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 2rem;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .play-from-detail-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 48px rgba(99, 102, 241, 0.5);
        }

        .play-from-detail-btn i {
            margin-right: 0.75rem;
            font-size: 1.3rem;
        }

        /* Music Player */
        .music-player-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 450px;
            margin: 0 auto;
            padding: 2rem 1rem;
            min-height: calc(100vh - 4rem);
            box-sizing: border-box;
        }

        .music-player-box {
            background: var(--glass);
            backdrop-filter: blur(30px);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            padding: 2.5rem;
            box-shadow: var(--shadow-intense);
            position: relative;
            overflow: hidden;
            width: 100%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
        }

        .music-player-box::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, var(--primary), var(--secondary), var(--accent), var(--primary));
            opacity: 0.1;
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .player-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
        }

        .album-art-player {
            width: 80px;
            height: 80px;
            border-radius: 16px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
            animation: pulse 4s ease-in-out infinite;
            object-fit: cover;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3); }
            50% { box-shadow: 0 12px 40px rgba(99, 102, 241, 0.5); }
        }

        .track-info-player h2 {
            font-size: 1.4rem;
            font-weight: 600;
            margin: 0 0 0.25rem 0;
            color: var(--text-primary);
        }

        .track-info-player p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin: 0;
        }

        /* Lyrics Container */
        .lyrics-container {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 16px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            height: 180px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
            border: 1px solid rgba(255, 255, 255, 0.05);
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .lyrics-container::-webkit-scrollbar {
            width: 8px;
        }
        .lyrics-container::-webkit-scrollbar-track {
            background: #282828;
            border-radius: 10px;
        }
        .lyrics-container::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }
        .lyrics-container::-webkit-scrollbar-thumb:hover {
            background: var(--secondary);
        }

        .lyric-line {
            color: rgba(255, 255, 255, 0.4);
            transition: color 0.3s ease;
            display: block;
            margin-bottom: 0.2em;
        }

        .lyric-line.highlight {
            color: #FFFFFF;
            font-weight: 600;
        }

        /* Player Controls */
        .player-controls {
            margin-top: auto;
            position: relative;
            z-index: 1;
        }

        .progress-section-player {
            margin-bottom: 2rem;
        }

        .progress-bar-container-player {
            background: rgba(255, 255, 255, 0.1);
            height: 10px;
            border-radius: 5px;
            margin-bottom: 1rem;
            overflow: hidden;
            cursor: pointer;
        }

        .progress-bar-player {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 5px;
            transition: width 0.1s linear;
            position: relative;
        }

        .time-display-player {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .main-controls-player {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-bottom: 2rem;
        }

        .control-btn-player {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.6rem;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 12px;
            border-radius: 50%;
        }

        .play-pause-player {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            font-size: 2.2rem;
            width: 70px;
            height: 70px;
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.4);
            color: white;
        }

        .play-pause-player:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 48px rgba(99, 102, 241, 0.6);
        }

        .control-btn-player:hover {
            color: var(--accent);
            transform: scale(1.2);
        }

        .control-btn-player.small-icon {
            font-size: 1.2rem;
        }

        .control-btn-player.active-feature {
            color: var(--accent) !important;
        }

        .secondary-controls-player {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 0.5rem;
            width: 100%;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .volume-control-player, .playback-speed-control {
            display: flex;
            align-items: center;
        }

        .volume-icon-player, .speed-icon {
            color: var(--primary);
            font-size: 0.9rem;
        }

        .volume-icon-player.ml-1 { 
            margin-left: 0.25rem; 
        }

        .volume-slider-player, .speed-slider {
            width: 80px;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            outline: none;
            opacity: 0.8;
            transition: opacity 0.2s;
            margin: 0 0.5rem;
        }

        .volume-slider-player:hover, .speed-slider:hover {
            opacity: 1;
        }

        .volume-slider-player::-webkit-slider-thumb, .speed-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px var(--accent);
        }

        .volume-slider-player::-moz-range-thumb, .speed-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        #currentSpeedDisplay {
            font-size: 0.85rem;
            color: var(--accent);
            min-width: 35px;
            text-align: right;
            font-weight: 600;
        }

        .footer-credit {
            text-align: center;
            margin-top: 2rem;
            color: var(--text-secondary);
            font-size: 0.75rem;
            opacity: 0.7;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .page { padding: 1rem; }
            .song-list { grid-template-columns: 1fr; }
            .song-detail-container, .music-player-box { 
                padding: 2rem; 
                margin: 0 1rem; 
            }
            .music-player-container {
                width: 95%;
            }
            .player-header {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            .album-art-player {
                width: 100px;
                height: 100px;
                margin-right: 0;
                margin-bottom: 1rem;
            }
            .lyrics-container {
                height: 150px;
                font-size: 0.9rem;
            }
            .control-btn-player { font-size: 1.4rem; }
            .control-btn-player.play-pause-player { 
                font-size: 2rem; 
                width: 60px;
                height: 60px;
            }
            .secondary-controls-player {
                flex-direction: column;
                gap: 0.8rem;
            }
            .volume-control-player, .playback-speed-control {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="animated-bg"></div>
    <div class="floating-particles" id="particles"></div>

    <div class="video-background-container">
        <video id="backgroundVideo" autoplay loop muted playsinline></video>
        <div class="video-overlay"></div>
    </div>

    <div id="homePage" class="page active">
        <header>
            <h1>XII TJKT 1 PLAYLIST</h1>
        </header>
        <main>
            <ul id="songList" class="song-list">
                <li class="loading-songs">Memuat lagu terbaru...</li> 
            </ul>
        </main>
    </div>

    <div id="songDetailPage" class="page">
        <button id="backToHomeFromDetailBtn" class="back-btn"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div class="song-detail-container">
            <img id="detailAlbumArt" src="https://placehold.co/180x180/6366f1/ffffff?text=ðŸŽµ" alt="Album Art" class="detail-album-art">
            <h2 id="detailTrackTitle">Judul Lagu</h2>
            <p id="detailTrackArtist">Nama Artis</p>
            <p id="detailAlbumName">Nama Album</p>
            <button id="playFromDetailBtn" class="play-from-detail-btn"><i class="fas fa-play-circle"></i> Putar</button>
        </div>
    </div>

    <div id="playerPage" class="page">
        <button id="backToHomeBtn" class="back-btn"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div class="music-player-container">
            <div class="music-player-box">
                <div class="player-header">
                    <img id="albumArt" src="https://placehold.co/80x80/6366f1/ffffff?text=ðŸŽµ" alt="Album Art" class="album-art-player">
                    <div class="track-info-player">
                        <h2 id="playerTrackTitle">Judul Lagu</h2>
                        <p id="playerTrackArtist">Nama Artis</p>
                    </div>
                </div>

                <div id="lyricsContainer" class="lyrics-container">
                    <p>Lirik akan tampil di sini...</p>
                </div>

                <div class="player-controls">
                    <div class="progress-section-player">
                        <div id="playerProgressBarContainer" class="progress-bar-container-player">
                            <div id="playerProgressBar" class="progress-bar-player"></div>
                        </div>
                        <div class="time-display-player">
                            <span id="playerCurrentTime">0:00</span>
                            <span id="playerTotalDuration">0:00</span>
                        </div> 
                    </div>

                    <div class="main-controls-player">
                        <button id="playerPrevBtn" class="control-btn-player"><i class="fas fa-backward-step"></i></button>
                        <button id="playerPlayPauseBtn" class="control-btn-player play-pause-player"><i class="fas fa-play"></i></button>
                        <button id="playerNextBtn" class="control-btn-player"><i class="fas fa-forward-step"></i></button>
                    </div>

                    <div class="secondary-controls-player">
                        <button id="playerRepeatBtn" class="control-btn-player small-icon"><i class="fas fa-repeat"></i></button>
                        <button id="playerShuffleBtn" class="control-btn-player small-icon"><i class="fas fa-shuffle"></i></button>
                        <div class="volume-control-player">
                            <i class="fas fa-volume-down volume-icon-player"></i>
                            <input type="range" id="playerVolumeSlider" class="volume-slider-player" min="0" max="1" step="0.01" value="0.8">
                            <i class="fas fa-volume-up volume-icon-player ml-1"></i>
                        </div>
                        <div class="playback-speed-control">
                            <i class="fas fa-tachometer-alt speed-icon"></i>
                            <input type="range" id="playerSpeedSlider" class="speed-slider" min="0.5" max="2.0" step="0.25" value="1.0">
                            <span id="currentSpeedDisplay">1.0x</span>
                        </div>
                    </div>
                </div>
                <p class="footer-credit">//next level code by: @Arutia</p>
            </div>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <script>
        // Create floating particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 15;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = Math.random() * 4 + 2;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                
                particlesContainer.appendChild(particle);
            }
        }

        // YOUR ORIGINAL JAVASCRIPT CODE - INTEGRATED WITH NEW DESIGN
        
        // DOM Elements
        const homePage = document.getElementById('homePage');
        const songDetailPage = document.getElementById('songDetailPage');
        const playerPage = document.getElementById('playerPage');
        const songListElement = document.getElementById('songList');

        const backToHomeFromDetailBtn = document.getElementById('backToHomeFromDetailBtn');
        const backToHomeBtn = document.getElementById('backToHomeBtn');
        const bodyElement = document.body;

        const backgroundVideoContainer = document.querySelector('.video-background-container');
        const backgroundVideo = document.getElementById('backgroundVideo');

        const detailAlbumArt = document.getElementById('detailAlbumArt');
        const detailTrackTitle = document.getElementById('detailTrackTitle');
        const detailTrackArtist = document.getElementById('detailTrackArtist');
        const detailAlbumName = document.getElementById('detailAlbumName');
        const playFromDetailBtn = document.getElementById('playFromDetailBtn');

        const audioPlayer = document.getElementById('audioPlayer');
        const albumArtPlayer = document.getElementById('albumArt');
        const playerTrackTitle = document.getElementById('playerTrackTitle');
        const playerTrackArtist = document.getElementById('playerTrackArtist');
        const lyricsContainer = document.getElementById('lyricsContainer');

        const playerProgressBarContainer = document.getElementById('playerProgressBarContainer');
        const playerProgressBar = document.getElementById('playerProgressBar');
        const playerCurrentTime = document.getElementById('playerCurrentTime');
        const playerTotalDuration = document.getElementById('playerTotalDuration');

        const playerPrevBtn = document.getElementById('playerPrevBtn');
        const playerPlayPauseBtn = document.getElementById('playerPlayPauseBtn');
        const playerNextBtn = document.getElementById('playerNextBtn');
        const playerRepeatBtn = document.getElementById('playerRepeatBtn');
        const playerShuffleBtn = document.getElementById('playerShuffleBtn');
        const playerVolumeSlider = document.getElementById('playerVolumeSlider');
        const playerSpeedSlider = document.getElementById('playerSpeedSlider');
        const currentSpeedDisplay = document.getElementById('currentSpeedDisplay');

        // App State
        let songs = [
            {
                id: 1,
                title: "Consume",
                artist: "Chase Atlantic",
                album: "Beauty in Death",
                albumArtUrl: "https://tse3.mm.bing.net/th?id=OIP.VwivM--7Xx_SmgsqXBLi8AAAAA&pid=Api&P=0&h=220",
                audioSrc: "audio/consume.mp3",
                videoBgSrc: "video/consume.mp4",
                lyrics: [
                    { time: 0.8, text: "She said, Careful, or you'll lose it" },
                    { time: 4, text: "But, girl, I'm only human," },
                    { time: 7, text: "And I know there's a blade where your heart is" },
                    { time: 10, text: "And you know how to use it" },
                    { time: 13, text: "And you can take my flesh if you want girl" },
                    { time: 16, text: "But, baby, don't abuse it (Calm down)" },
                    { time: 19, text: "These voices in my head screaming, Run now (Don't run)" },
                    { time: 22, text: "I'm praying that they're human" },
                    { time: 25, text: "Please understand that I'm trying my hardest" },
                    { time: 28, text: "My head's a mess, but I'm trying regardless" },
                    { time: 31, text: "Anxiety is one hell of a problem" },
                    { time: 34, text: "She's latching onto me, I can't resolve it" },
                    { time: 37, text: "It's not right, it's not fair, it's not fair" },
                    { time: 41.5, text: "It's not fair, it's not fair, it's not fair" },
                    { time: 47, text: "Oh, no, no, no, ooh-ooh" },
                ]
            },
            {
                id: 2,
                title: "Just Friend To You",
                artist: "Meghan Trainor",
                album: "Thank You",
                albumArtUrl: "https://i.ytimg.com/vi/Q6Xs3FsqmYM/maxresdefault.jpg",
                audioSrc: "audio/just a friend to you.mp3",
                videoBgSrc: "video/just a friend to you.mp4",
                lyrics: [
                    { time: 0 , text: "...." },
                    { time: 7.0, text: "Oh, Oh, Oh-Oh-Oh" },
                    { time: 13, text: "...." },
                    { time: 15.8, text: "Why You Gotta Hug Me Like That" },
                    { time: 18.5, text: "Every Time You See Me?" },
                    { time: 22.3, text: "Why You Always Making Me Laugh?" },
                    { time: 26., text: "Swear You're Catching Feelings" },
                    { time: 29, text: "I Loved You From The Start" },
                    { time: 32., text: "So It Breaks My Heart" },
                    { time: 34., text: "When You Say I'm Just A Friend To You" },
                    { time: 38.8, text: "Cause Friends Dont Do The Things We Do" },
                    { time: 42., text: "Everybody Knows You Love Me Too" },
                    { time: 48., text: "Tryna Be Careful With The Words I Use" },
                    { time: 52.7, text: "I'll Say It Cause I'm Dying To" },
                    { time: 56, text: "I'm So Much More Than Just A Friend To You" }
                ]
            },    
            {
                id: 3,
                title: "Ours To Keep",
                artist: "Kendis - Adis",
                album: "Ours To Keep",
                albumArtUrl: "https://i.ytimg.com/vi/Ffp55Ebmjwk/maxresdefault.jpg",
                audioSrc: "audio/ours to keep.mp3",
                videoBgSrc: "video/ours to keep.mp4",
                lyrics: [
                    { time: 0, text: "....." },
                    { time: 10.6, text: "How are you in your time alone?" },
                    { time: 14.2, text: "Iâ€²m doing fine, well, I'm not" },
                    { time: 17.4, text: "I feel like I wanna die" },
                    { time: 21.5, text: "I have so much to tell you, love" },
                    { time: 25.7, text: "From the start of the day â€²Til the dawn breaks away" },
                    { time: 32, text: "I've been thinking of you" },
                    { time: 35, text: "And I've been missing your voice on the other side" },
                    { time: 42.5, text: "And Iâ€²ve been dreaming of you" },
                    { time: 46., text: "And I can hear you singing through the silent night" },
                    { time: 53, text: "Do you ever feel the need to" },
                    { time: 57, text: "Get away from me?" },
                    { time: 59.2, text: "Do I Bore You?" },
                    { time: 63, text: "Or Do You Want To Take Me" },
                    { time: 65.5, text: "From This Crowded place to" },
                    { time: 68, text: "Somewhere We Can Find Some Peace" },
                    { time: 71., text: "And The World Is Ours To Keep" },
                    { time: 80, text: "....." },
                    { time: 85, text: "They Dont Have To Know We Touch" },
                    { time: 89.5, text: "Cause This Feelings All Ours" },
                    { time: 92.2, text: "They'd Become So Loud" },
                    { time: 93.7, text: "Trying To Fix What Was Never Really Broken" },
                ]
            },
            {
                id: 4,
                title: "Tarot",
                artist: ".feast",
                album: "",
                albumArtUrl: "https://i.ytimg.com/vi/1rv1PjprD18/maxresdefault.jpg",
                audioSrc: "audio/tirit.mp3",
                videoBgSrc: "video/tarot.mp4",
                lyrics: [
                    { time: 0, text: "Ku yakin nyawa kita bertautan" },
            { time: 4.5, text: "Khatam berbagai cobaan" },
            { time: 6.9, text: "Selalu menertawakan ramalan bintang kartu tarot" },
            { time: 13.8, text: "Orang pintar pembaca nasib" },
            { time: 16.9, text: "Namun Aku Bingung" },
            { time: 19, text: "Kenapa Ku Tak Pergi" },
            { time: 21.2, text: "Aku Bingung" },
            { time: 23, text: "Kalian Masih Di Sini" },
            { time: 25.9, text: "Apa Mungkin Karena Terlalu Lama" },
            { time: 30, text: "Apa Benar Tuk Berbagi Derita" },
            { time: 34, text: "Mungkin Nanti Semua Justru Memburuk" },
            { time: 38, text: "Hati-Hati Namun Terjatuh Lagi" },
                ]
            },
            {
                id: 5,
                title: "I'd Like To Watch You Sleepin'",
                artist: "Sal Priadi",
                album: "",
                albumArtUrl: "https://i.ytimg.com/vi/4OL6d6NZ3I0/maxresdefault.jpg",
                audioSrc: "audio/tiktok-download.mp3",
                videoBgSrc: "video/sal.mp4",
                lyrics: [
                    { time: 0, text: "...." },
                    { time: 1, text: "I'd like to watch you sleeping" },
                    { time: 6.8, text: "Lebih sering menganga" },
                    { time: 10.3, text: "Aku lihat ada tempat longgar di sana" },
                    { time: 15, text: "Aku ingin tinggal di belakang gigimu" },
                    { time: 22, text: "Aku banyak takutnya" },
                    { time: 26, text: "Misalnya kehilangan dirimu sekali lagi" },
                    { time: 32, text: "Dan patah hati" },
                    { time: 35., text: "Perasaan sendiri bukan hal yang aku suka" },
                    { time: 42.9, text: "Hal yang paling kusuka Di dekatmu" },
                    { time: 47, text: "Kau adalah orang favoritku" },
                    { time: 51, text: "Nomor satu Nomor 2, 3, 4, 5, 6" },
                    { time: 58, text: "isinya namamu huruf besar semua" },
                ]
            },
            {
                id: 6,
                title: "Let Down",
                artist: "Radiohead",
                album: "OK Computer",
                albumArtUrl: "https://images.genius.com/ea1fda114f5091bce67f87cf8437b647.1000x1000x1.png",
                audioSrc: "audio/letdown.mp3",
                videoBgSrc: "video/letdown.mp4",
                lyrics: [
            { time: 0.2  ,  text: "Floor collapsing Floating" },
            { time: 5,  text: "bouncing back and " },
            { time: 7, text: "One day, I am gonna grow wings" },
            { time: 14.2, text: "A chemical reaction" },
            { time: 17.9, text: "Hysterical and useless" },
            { time: 23, text: "Hysterical and" },
            { time: 26, text: "Let down and hanging around" },
            { time: 33, text: "Crushed like a bug in the ground" },
            { time: 40, text: "Let down and hanging around" }
                ]
            },
            {
                 id: 7,
                title: "I Wanna Be Yours",
        artist: "Arctic Monkeys",
        album: "AM",
        albumArtUrl: "https://i.ytimg.com/vi/fJLQCf4mFP0/hqdefault.jpg",
        audioSrc: "audio/I Wanna Be Yours.mp3",
        videoBgSrc: "video/wanna be yur.mp4",
        lyrics: [
            { time: 1000, text: "I wanna be your vacuum cleaner" },
            { time: 1000, text: "Breathing in your dust" },
            { time: 1000, text: "I wanna be your Ford Cortina" },
            { time: 1000, text: "I will never rust" },
            { time: 1000, text: "If you like your coffee hot" },
            { time: 1000, text: "Let me be your coffee pot" },
            { time: 1000, text: "You call the shots, babe" },
            { time: 1000, text: "I just wanna be yours" },
            
            { time: 1000, text: "Secrets I have held in my heart" },
            { time: 1000, text: "Are harder to hide than I thought" },
            { time: 1000, text: "Maybe I just wanna be yours" },
            { time: 1000, text: "I wanna be yours, I wanna be yours" },
            { time: 1000, text: "Wanna be yours, wanna be yours, wanna be yours" },

            { time: 1000, text: "Let me be your 'leccy meter and I'll never run out" },
            { time: 1000, text: "Let me be the portable heater that you'll get cold without" },
            { time: 1000, text: "I wanna be your setting lotion (wanna be)" },
            { time: 1000, text: "Hold your hair in deep devotion (how deep?)" },
            { time: 1000, text: "At least as deep as the Pacific Ocean" },
            { time: 1000, text: "I wanna be yours" },

            { time: 1000, text: "Secrets I have held in my heart" },
            { time: 1000, text: "Are harder to hide than I thought" },
            { time: 1000, text: "Maybe I just wanna be yours" },
            { time: 1000, text: "I wanna be yours, I wanna be yours" },
            { time: 1000, text: "Wanna be yours, wanna be yours, wanna be yours" },
            { time: 1000, text: "Wanna be yours, wanna be yours, wanna be yours" },
            { time: 1000, text: "Wanna be yours, wanna be yours" },

            { time: 1000, text: "I wanna be your vacuum cleaner (Wanna be yours)" },
            { time: 1000, text: "Breathing in your dust (Wanna be yours)" },
            { time: 1000, text: "I wanna be your Ford Cortina (Wanna be yours)" },
            { time: 1000, text: "I will never rust (Wanna be yours)" },
            { time: 1000, text: "I just wanna be yours (Wanna be yours)" },
            { time: 1000, text: "I just wanna be yours (Wanna be yours)" },
            { time: 1000, text: "I just wanna be yours (Wanna be yours)" }
                ]
            },
            {
                id: 5,
                title: "Message in Bottle",
                artist: "Taylor Swift",
                album: "Red (Taylor's Version)",
                albumArtUrl: "https://www.songmeaningsandfacts.com/wp-content/uploads/2022/11/Message-in-a-Bottle-by-Taylor-Swift.jpg",
                audioSrc: "audio/bocil.mp3",
                videoBgSrc: "video/message.mp4",
                lyrics: [
                    { time: 0, text: "Cause you could be the one that I love" },
                    { time: 4, text: "I could be the one that you dream of" },
                    { time: 8, text: "A message in a bottle is all I can do" },
                    { time: 11, text: "Standin' here, hopin' it gets to you" },
                    { time: 16, text: "You could be the one that I keep, and I" },
                    { time: 20, text: "I could be the reason you can't sleep at night" },
                    { time: 24, text: "A message in a bottle is all I can do" },
                    { time: 28, text: "Standin' here, hopin' it gets to you" }
                ]
            },
            {
                id: 8,
                title: "Fearless",
                artist: "Taylor Swift", 
                album: "",
                albumArtUrl: "https://i.ytimg.com/vi/7lLigiVgJsE/maxresdefault.jpg", 
                audioSrc: "audio/fearless.mp3",
                videoBgSrc: "video/videoplayback.mp4",
                lyrics: [
                    { time: 0, text: "...." },
                    { time: 2, text: "We're drivin' down the road" },
                    { time: 4.8, text: "I wonder if you know" },
                    { time: 7.4, text: "I'm tryin' so hard not to get caught up now" },
                    { time: 11.7, text: "But you're just so cool" },
                    { time: 14.4, text: "Run your hands through your hair" },
                    { time: 17, text: "Absentmindedly makin' me want you" },
                    { time: 20.8, text: "And I don't know how it gets better than this" },
                    { time: 26.7, text: "You take my hand and drag me head first" },
                    { time: 29.8, text: "Fearless" },
                    { time: 31.5, text: "And I don't know why but with you I'd dance in a storm in my best dress" },
                    { time: 39, text: "Fearless" }
                ]
            }
        ];
        

        let currentSongIndex = 0;
        let isPlaying = false;
        let isShuffle = false;
        let repeatMode = 0; // 0: no repeat, 1: repeat one, 2: repeat all

        // --- Page Navigation ---
        function showHomePage() {
            playerPage.classList.remove('active');
            songDetailPage.classList.remove('active');
            homePage.classList.add('active');

            bodyElement.classList.remove('player-active-bg');
            bodyElement.classList.remove('detail-active-bg');
            backgroundVideoContainer.classList.remove('active');
            backgroundVideo.pause();
            backgroundVideo.src = "";
            backgroundVideo.load();
            pauseTrack();
        }

        function showSongDetailPage(song) {
            homePage.classList.remove('active');
            playerPage.classList.remove('active');
            songDetailPage.classList.add('active');

            detailAlbumArt.src = song.albumArtUrl;
            detailTrackTitle.textContent = song.title;
            detailTrackArtist.textContent = song.artist;
            detailAlbumName.textContent = song.album || "Unknown Album";

            bodyElement.classList.remove('player-active-bg');
            bodyElement.classList.add('detail-active-bg');
            backgroundVideoContainer.classList.remove('active');
            backgroundVideo.pause();
            backgroundVideo.src = "";
            backgroundVideo.load();
        }

        function showPlayerPage() {
            homePage.classList.remove('active');
            songDetailPage.classList.remove('active');
            playerPage.classList.add('active');

            bodyElement.classList.remove('detail-active-bg');
            bodyElement.classList.add('player-active-bg');
            backgroundVideoContainer.classList.add('active');

            const currentSong = songs[currentSongIndex];
            if (currentSong && currentSong.videoBgSrc) {
                backgroundVideo.src = currentSong.videoBgSrc;
                backgroundVideo.load();
                backgroundVideo.play().catch(e => console.error("Error playing video background:", e));
            } else {
                backgroundVideo.src = "";
                backgroundVideo.load();
            }
        }

        // --- Home Page Logic ---
        function renderSongList() {
            songListElement.innerHTML = '';
            if (songs.length === 0) {
                songListElement.innerHTML = '<li class="loading-songs">Tidak ada lagu tersedia.</li>';
                return;
            }
            songs.forEach((song, index) => {
                const listItem = document.createElement('li');
                listItem.setAttribute('data-id', song.id);
                listItem.innerHTML = `
                    <img src="${song.albumArtUrl}" alt="${song.title}" class="song-art-list">
                    <div class="song-info-list">
                        <h3>${song.title}</h3>
                        <p>${song.artist}</p>
                    </div>
                `;

                listItem.addEventListener('click', () => {
                    currentSongIndex = index;
                    loadSong(songs[currentSongIndex]);
                    playTrack();
                    showPlayerPage();
                });

                listItem.addEventListener('mouseenter', () => {
                    if (homePage.classList.contains('active') && song.videoBgSrc) {
                        backgroundVideo.src = song.videoBgSrc;
                        backgroundVideo.load();
                        backgroundVideoContainer.classList.add('active');
                        backgroundVideo.play().catch(e => console.error("Error playing video on hover:", e));
                        bodyElement.classList.add('player-active-bg');
                    }
                });

                listItem.addEventListener('mouseleave', () => {
                    if (homePage.classList.contains('active')) {
                        backgroundVideoContainer.classList.remove('active');
                        backgroundVideo.pause();
                        backgroundVideo.src = "";
                        backgroundVideo.load();
                        bodyElement.classList.remove('player-active-bg');
                    }
                });

                songListElement.appendChild(listItem);
            });
        }

        // --- Player Logic ---
        function loadSong(song) {
            if (!song) {
                console.error("Lagu tidak ditemukan!");
                albumArtPlayer.src = "https://placehold.co/80x80/6366f1/ffffff?text=Error";
                playerTrackTitle.textContent = "Lagu Tidak Tersedia";
                playerTrackArtist.textContent = "-";
                lyricsContainer.innerHTML = "<p>Lirik tidak tersedia.</p>";
                audioPlayer.src = "";
                playerCurrentTime.textContent = "0:00";
                playerTotalDuration.textContent = "0:00";
                playerProgressBar.style.width = "0%";
                return;
            }
            albumArtPlayer.src = song.albumArtUrl;
            playerTrackTitle.textContent = song.title;
            playerTrackArtist.textContent = song.artist;
            
            renderLyrics(song.lyrics);
            
            audioPlayer.src = song.audioSrc;

            audioPlayer.onloadedmetadata = () => {
                playerTotalDuration.textContent = formatTime(audioPlayer.duration);
            };
            audioPlayer.load();
            updatePlayPauseIcon();
        }

        function renderLyrics(lyrics) {
            lyricsContainer.innerHTML = '';
            if (!lyrics || lyrics.length === 0) {
                lyricsContainer.innerHTML = "<p>Lirik tidak tersedia untuk lagu ini.</p>";
                return;
            }

            lyrics.forEach(line => {
                const span = document.createElement('span');
                span.textContent = line.text;
                span.setAttribute('data-time', line.time);
                span.classList.add('lyric-line');
                lyricsContainer.appendChild(span);
            });
        }

        function playTrack() {
            if (!audioPlayer.src || audioPlayer.src === window.location.href) {
                if (songs.length > 0) {
                    loadSong(songs[currentSongIndex]);
                } else {
                    console.log("Tidak ada lagu untuk dimainkan.");
                    return;
                }
            }
            isPlaying = true;
            audioPlayer.play().catch(error => console.error("Error saat play:", error));
            updatePlayPauseIcon();
        }

        function pauseTrack() {
            isPlaying = false;
            audioPlayer.pause();
            updatePlayPauseIcon();
        }

        function updatePlayPauseIcon() {
            if (isPlaying) {
                playerPlayPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
            } else {
                playerPlayPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            }
        }

        function prevTrack() {
            if (songs.length === 0) return;
            if (isShuffle) {
                playRandomTrack();
            } else {
                currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
            }
            loadSong(songs[currentSongIndex]);
            playTrack();
            showPlayerPage();
        }

        function nextTrackLogic() {
            if (songs.length === 0) return;
            if (isShuffle) {
                playRandomTrack();
            } else {
                currentSongIndex = (currentSongIndex + 1) % songs.length;
            }
            loadSong(songs[currentSongIndex]);
            playTrack();
            showPlayerPage();
        }

        function nextTrack() {
            if (songs.length === 0) return;

            if (repeatMode === 1 && audioPlayer.ended) {
                // Handled by audio.loop = true
            } else if (isShuffle) {
                playRandomTrack();
            } else {
                currentSongIndex++;
                if (currentSongIndex >= songs.length) {
                    if (repeatMode === 2) {
                        currentSongIndex = 0;
                    } else {
                        currentSongIndex = songs.length - 1;
                        loadSong(songs[currentSongIndex]);
                        pauseTrack();
                        audioPlayer.currentTime = audioPlayer.duration;
                        return;
                    }
                }
                loadSong(songs[currentSongIndex]);
                playTrack();
            }
            showPlayerPage();
        }

        function playRandomTrack() {
            if (songs.length <= 1) {
                currentSongIndex = 0;
            } else {
                let randomIndex;
                do {
                    randomIndex = Math.floor(Math.random() * songs.length);
                } while (randomIndex === currentSongIndex);
                currentSongIndex = randomIndex;
            }
            loadSong(songs[currentSongIndex]);
            playTrack();
            showPlayerPage();
        }

        // Audio event listeners
        audioPlayer.addEventListener('timeupdate', () => {
            if (audioPlayer.duration) {
                const progressPercent = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                playerProgressBar.style.width = `${progressPercent}%`;
                playerCurrentTime.textContent = formatTime(audioPlayer.currentTime);
                
                // Lyrics highlighting
                const currentTime = audioPlayer.currentTime;
                const lyricLines = lyricsContainer.querySelectorAll('.lyric-line');
                let highlightedLine = null;

                lyricLines.forEach((line, index) => {
                    const lineTime = parseFloat(line.getAttribute('data-time'));
                    let nextLineTime = Infinity; 
                    if (index + 1 < lyricLines.length) {
                        nextLineTime = parseFloat(lyricLines[index + 1].getAttribute('data-time'));
                    }

                    if (currentTime >= lineTime && currentTime < nextLineTime) {
                        line.classList.add('highlight');
                        highlightedLine = line;
                    } else {
                        line.classList.remove('highlight');
                    }
                });

                if (highlightedLine) {
                    const containerRect = lyricsContainer.getBoundingClientRect();
                    const lineRect = highlightedLine.getBoundingClientRect();

                    const isOutsideTop = lineRect.top < containerRect.top;
                    const isOutsideBottom = lineRect.bottom > containerRect.bottom;

                    if (isOutsideTop || isOutsideBottom) {
                        highlightedLine.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }
            }
        });

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }

        // Control event listeners
        playerProgressBarContainer.addEventListener('click', (e) => {
            if (!audioPlayer.duration || songs.length === 0) return;
            const width = playerProgressBarContainer.clientWidth;
            const clickX = e.offsetX;
            audioPlayer.currentTime = (clickX / width) * audioPlayer.duration;
        });

        playerVolumeSlider.addEventListener('input', (e) => {
            audioPlayer.volume = e.target.value;
        });

        playerSpeedSlider.addEventListener('input', (e) => {
            audioPlayer.playbackRate = parseFloat(e.target.value);
            currentSpeedDisplay.textContent = `${audioPlayer.playbackRate.toFixed(2)}x`;
        });

        playerShuffleBtn.addEventListener('click', () => {
            isShuffle = !isShuffle;
            playerShuffleBtn.classList.toggle('active-feature', isShuffle);
            console.log("Shuffle: " + isShuffle);
        });

        playerRepeatBtn.addEventListener('click', () => {
            repeatMode = (repeatMode + 1) % 3;
            updateRepeatButtonUI();
            console.log("Repeat Mode: " + repeatMode);
        });

        function updateRepeatButtonUI() {
            playerRepeatBtn.classList.remove('active-feature');
            audioPlayer.loop = false;

            if (repeatMode === 0) {
                playerRepeatBtn.innerHTML = '<i class="fas fa-repeat"></i>';
            } else if (repeatMode === 1) {
                playerRepeatBtn.innerHTML = '<i class="fas fa-repeat-1"></i>';
                playerRepeatBtn.classList.add('active-feature');
                audioPlayer.loop = true;
            } else {
                playerRepeatBtn.innerHTML = '<i class="fas fa-repeat"></i>';
                playerRepeatBtn.classList.add('active-feature');
            }
        }

        playerPlayPauseBtn.addEventListener('click', () => {
            if (isPlaying) {
                pauseTrack();
            } else {
                playTrack();
            }
        });

        playerPrevBtn.addEventListener('click', prevTrack);
        playerNextBtn.addEventListener('click', nextTrackLogic);

        audioPlayer.addEventListener('ended', () => {
            if (repeatMode === 1) {
                // Handled by audio.loop = true
            } else {
                nextTrack();
            }
        });

        // Navigation event listeners
        backToHomeFromDetailBtn.addEventListener('click', showHomePage);
        backToHomeBtn.addEventListener('click', showHomePage);

        playFromDetailBtn.addEventListener('click', () => {
            loadSong(songs[currentSongIndex]);
            playTrack();
            showPlayerPage();
        });

        // Enhanced effects
        function addSparkles() {
            const sparkleContainer = document.createElement('div');
            sparkleContainer.style.position = 'fixed';
            sparkleContainer.style.pointerEvents = 'none';
            sparkleContainer.style.top = '0';
            sparkleContainer.style.left = '0';
            sparkleContainer.style.width = '100%';
            sparkleContainer.style.height = '100%';
            sparkleContainer.style.zIndex = '999';
            
            for (let i = 0; i < 5; i++) {
                const sparkle = document.createElement('div');
                sparkle.innerHTML = 'âœ¨';
                sparkle.style.position = 'absolute';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animation = `sparkle ${Math.random() * 3 + 2}s ease-in-out infinite`;
                sparkle.style.fontSize = Math.random() * 20 + 10 + 'px';
                sparkleContainer.appendChild(sparkle);
                
                setTimeout(() => sparkle.remove(), 5000);
            }
            
            document.body.appendChild(sparkleContainer);
            setTimeout(() => sparkleContainer.remove(), 5000);
        }

        // Add sparkle animation
        const sparkleStyle = document.createElement('style');
        sparkleStyle.textContent = `
            @keyframes sparkle {
                0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
                50% { opacity: 1; transform: scale(1) rotate(180deg); }
            }
        `;
        document.head.appendChild(sparkleStyle);

        // Enhanced navigation with sparkles
        let originalNextTrackLogic = nextTrackLogic;
        let originalPrevTrack = prevTrack;
        
        nextTrackLogic = function() {
            addSparkles();
            originalNextTrackLogic();
        };
        
        prevTrack = function() {
            addSparkles();
            originalPrevTrack();
        };

        // 3D hover effects on player
        document.addEventListener('mousemove', (e) => {
            if (document.getElementById('playerPage').classList.contains('active')) {
                const playerBox = document.querySelector('.music-player-box');
                const rect = playerBox.getBoundingClientRect();
                const x = (e.clientX - rect.left) / rect.width;
                const y = (e.clientY - rect.top) / rect.height;
                
                const rotateX = (y - 0.5) * 10;
                const rotateY = (x - 0.5) * -10;
                
                playerBox.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            }
        });

        document.addEventListener('mouseleave', () => {
            const playerBox = document.querySelector('.music-player-box');
            if (playerBox) {
                playerBox.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg)';
            }
        });

        // --- Initialization ---
        function init() {
            console.log("Initializing...");
            createParticles();
            renderSongList();
            
            if (songs.length > 0) {
                loadSong(songs[currentSongIndex]);
            } else {
                albumArtPlayer.src = "https://placehold.co/80x80/6366f1/ffffff?text=ðŸŽµ";
                playerTrackTitle.textContent = "Tidak Ada Lagu";
                playerTrackArtist.textContent = "Tambahkan lagu";
                lyricsContainer.innerHTML = "<p>Silakan tambahkan lagu dari daftar.</p>";
            }
            audioPlayer.volume = playerVolumeSlider.value;
            audioPlayer.playbackRate = playerSpeedSlider.value;
            currentSpeedDisplay.textContent = `${audioPlayer.playbackRate.toFixed(2)}x`;
            updatePlayPauseIcon();
            updateRepeatButtonUI();
            showHomePage();
            console.log("Initialization complete.");
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>